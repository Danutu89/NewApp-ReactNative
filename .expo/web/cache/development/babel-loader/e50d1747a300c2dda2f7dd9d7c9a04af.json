{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _encBase = _interopRequireDefault(require(\"crypto-js/enc-base64\"));\n\nvar _encUtf = _interopRequireDefault(require(\"crypto-js/enc-utf8\"));\n\nvar _verifier = _interopRequireDefault(require(\"./verifier\"));\n\nvar Errors = _interopRequireWildcard(require(\"./errors\"));\n\nvar _algorithms = _interopRequireWildcard(require(\"./algorithms\"));\n\nvar _helpers = require(\"./helpers\");\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar _key;\n\nvar parse = function parse(encodedString) {\n  return JSON.parse(_encBase[\"default\"].parse(encodedString).toString(_encUtf[\"default\"]));\n};\n\nvar sign = function sign(body, algorithm) {\n  return (0, _helpers.urlEncodeBase64)(algorithm(body, _key).toString(_encBase[\"default\"]));\n};\n\nvar Decoder = function () {\n  function Decoder(key) {\n    _classCallCheck(this, Decoder);\n\n    _key = key;\n  }\n\n  _createClass(Decoder, [{\n    key: \"getAlgorithm\",\n    value: function getAlgorithm() {\n      var algorithm = this._header && this._header.alg;\n\n      if (!algorithm) {\n        throw new Errors.AlgorithmMissing();\n      }\n\n      if (algorithm === 'none') {\n        return 'none';\n      }\n\n      if (!~_algorithms.supportedAlgorithms.indexOf(algorithm)) {\n        throw new Errors.AlgorithmNotSupported();\n      }\n\n      return _algorithms[\"default\"][algorithm];\n    }\n  }, {\n    key: \"verifySignature\",\n    value: function verifySignature(encodedHeader, encodedBody) {\n      if (this.algorithm === 'none') {\n        return true;\n      }\n\n      var signatureBody = \"\".concat(encodedHeader, \".\").concat(encodedBody);\n\n      if (this.signature !== sign(signatureBody, this.algorithm)) {\n        throw new Errors.SignatureInvalid();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"verifyClaims\",\n    value: function verifyClaims() {\n      _verifier[\"default\"].verifyAll(this._body, this.options);\n    }\n  }, {\n    key: \"decodeAndVerify\",\n    value: function decodeAndVerify(token) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var _token$toString$split = token.toString().split('.'),\n          _token$toString$split2 = _slicedToArray(_token$toString$split, 3),\n          encodedHeader = _token$toString$split2[0],\n          encodedBody = _token$toString$split2[1],\n          signature = _token$toString$split2[2];\n\n      if (!encodedHeader || !encodedBody) {\n        throw new Errors.InvalidStructure();\n      }\n\n      this.options = options;\n      this.header = encodedHeader;\n      this.body = encodedBody;\n      this.signature = signature;\n      this.algorithm = this.getAlgorithm();\n      this.verifySignature(encodedHeader, encodedBody);\n      this.verifyClaims();\n      return this._body;\n    }\n  }, {\n    key: \"header\",\n    set: function set(header) {\n      try {\n        this._header = parse(header);\n      } catch (error) {\n        throw new Errors.InvalidHeader();\n      }\n    }\n  }, {\n    key: \"body\",\n    set: function set(body) {\n      try {\n        this._body = parse(body);\n      } catch (error) {\n        throw new Errors.InvalidBody();\n      }\n    }\n  }]);\n\n  return Decoder;\n}();\n\nvar _default = Decoder;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/danutu/Desktop/Projects/ReactNative/newapp/node_modules/expo-jwt/dist/decoder.js"],"names":["Object","defineProperty","exports","value","_encBase","_interopRequireDefault","require","_encUtf","_verifier","Errors","_interopRequireWildcard","_algorithms","_helpers","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_key","parse","encodedString","JSON","toString","sign","body","algorithm","urlEncodeBase64","Decoder","getAlgorithm","_header","alg","AlgorithmMissing","supportedAlgorithms","indexOf","AlgorithmNotSupported","verifySignature","encodedHeader","encodedBody","signatureBody","concat","signature","SignatureInvalid","verifyClaims","verifyAll","_body","options","decodeAndVerify","token","arguments","_token$toString$split","split","_token$toString$split2","InvalidStructure","header","error","InvalidHeader","InvalidBody","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _encBase = _interopRequireDefault(require(\"crypto-js/enc-base64\"));\n\nvar _encUtf = _interopRequireDefault(require(\"crypto-js/enc-utf8\"));\n\nvar _verifier = _interopRequireDefault(require(\"./verifier\"));\n\nvar Errors = _interopRequireWildcard(require(\"./errors\"));\n\nvar _algorithms = _interopRequireWildcard(require(\"./algorithms\"));\n\nvar _helpers = require(\"./helpers\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _key;\n\nvar parse = function parse(encodedString) {\n  return JSON.parse(_encBase[\"default\"].parse(encodedString).toString(_encUtf[\"default\"]));\n};\n\nvar sign = function sign(body, algorithm) {\n  return (0, _helpers.urlEncodeBase64)(algorithm(body, _key).toString(_encBase[\"default\"]));\n};\n\nvar Decoder =\n/*#__PURE__*/\nfunction () {\n  function Decoder(key) {\n    _classCallCheck(this, Decoder);\n\n    _key = key;\n  }\n\n  _createClass(Decoder, [{\n    key: \"getAlgorithm\",\n    value: function getAlgorithm() {\n      var algorithm = this._header && this._header.alg;\n\n      if (!algorithm) {\n        throw new Errors.AlgorithmMissing();\n      }\n\n      if (algorithm === 'none') {\n        return 'none';\n      }\n\n      if (!~_algorithms.supportedAlgorithms.indexOf(algorithm)) {\n        throw new Errors.AlgorithmNotSupported();\n      }\n\n      return _algorithms[\"default\"][algorithm];\n    }\n  }, {\n    key: \"verifySignature\",\n    value: function verifySignature(encodedHeader, encodedBody) {\n      if (this.algorithm === 'none') {\n        return true;\n      }\n\n      var signatureBody = \"\".concat(encodedHeader, \".\").concat(encodedBody);\n\n      if (this.signature !== sign(signatureBody, this.algorithm)) {\n        throw new Errors.SignatureInvalid();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"verifyClaims\",\n    value: function verifyClaims() {\n      _verifier[\"default\"].verifyAll(this._body, this.options);\n    }\n  }, {\n    key: \"decodeAndVerify\",\n    value: function decodeAndVerify(token) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var _token$toString$split = token.toString().split('.'),\n          _token$toString$split2 = _slicedToArray(_token$toString$split, 3),\n          encodedHeader = _token$toString$split2[0],\n          encodedBody = _token$toString$split2[1],\n          signature = _token$toString$split2[2];\n\n      if (!encodedHeader || !encodedBody) {\n        throw new Errors.InvalidStructure();\n      }\n\n      this.options = options;\n      this.header = encodedHeader;\n      this.body = encodedBody;\n      this.signature = signature;\n      this.algorithm = this.getAlgorithm();\n      this.verifySignature(encodedHeader, encodedBody);\n      this.verifyClaims();\n      return this._body;\n    }\n  }, {\n    key: \"header\",\n    set: function set(header) {\n      try {\n        this._header = parse(header);\n      } catch (error) {\n        throw new Errors.InvalidHeader();\n      }\n    }\n  }, {\n    key: \"body\",\n    set: function set(body) {\n      try {\n        this._body = parse(body);\n      } catch (error) {\n        throw new Errors.InvalidBody();\n      }\n    }\n  }]);\n\n  return Decoder;\n}();\n\nvar _default = Decoder;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}